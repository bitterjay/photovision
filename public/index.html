<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhotoVision - Conversational Image Discovery</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>PhotoVision</h1>
            <p>Search your SmugMug photos with natural language</p>
        </header>

        <main class="main">
            <div class="status-bar" id="status">
                <span class="status-text">Initializing...</span>
            </div>
            <div class="chat-container">
                <div class="messages" id="messages">
                    <div class="message system">
                        <div class="message-content">
                            Welcome to PhotoVision! Once you connect your SmugMug account and process your photos, you'll be able to search using natural language queries like "10 photos of young adults smiling" or "photos that feel nostalgic from summer evenings."
                        </div>
                    </div>
                </div>
                
                <div class="input-container">
                    <input type="text" id="messageInput" placeholder="Ask me to find photos: 'show me archery photos' or 'find 3 smiling people'..." disabled>
                    <button id="sendButton" disabled>Send</button>
                </div>
            </div>

            <div class="upload-section">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <i class="upload-icon">üì§</i>
                        <h3>Upload Images</h3>
                        <p>Drag and drop images here or click to select</p>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                        <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                            Choose Image
                        </button>
                    </div>
                </div>
                <div class="upload-progress" id="uploadProgress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <span class="progress-text" id="progressText">Analyzing...</span>
                </div>
                <div class="analysis-result" id="analysisResult" style="display: none;">
                    <h4>Analysis Result:</h4>
                    <div class="result-content" id="resultContent"></div>
                </div>
            </div>

            <div class="connections-dashboard">
                <div class="dashboard-header">
                    <h3>System Status</h3>
                    <button id="refreshStatus" class="refresh-btn">üîÑ</button>
                </div>
                
                <div class="services-grid">
                    <div class="service-card" id="claudeStatusCard">
                        <div class="service-icon">ü§ñ</div>
                        <div class="service-info">
                            <div class="service-name">Claude AI</div>
                            <div class="service-status" id="claudeStatus">
                                <span class="status-indicator checking"></span>
                                <span class="status-text">Checking...</span>
                            </div>
                        </div>
                        <button id="testClaude" class="test-btn">Test</button>
                    </div>
                    
                    <div class="service-card" id="smugmugStatusCard">
                        <div class="service-icon">üì∏</div>
                        <div class="service-info">
                            <div class="service-name">SmugMug</div>
                            <div class="service-status" id="smugmugStatus">
                                <span class="status-indicator disconnected"></span>
                                <span class="status-text">Not Connected</span>
                            </div>
                        </div>
                        <div class="smugmug-controls">
                            <button id="connectSmugmug" class="connect-btn">Connect</button>
                            <button id="testSmugmug" class="test-btn" disabled>Test</button>
                            <button id="disconnectSmugmug" class="disconnect-btn" disabled>Disconnect</button>
                        </div>
                    </div>
                </div>
                
                <div class="smugmug-account-info" id="smugmugAccountInfo" style="display: none;">
                    <h4>Connected SmugMug Account</h4>
                    <div class="account-details" id="accountDetails"></div>
                </div>
                
                <div class="last-checked">
                    <small>Last checked: <span id="lastChecked">Never</span></small>
                </div>
            </div>

            <div class="batch-processing-section" id="batchProcessingSection" style="display: none;">
                <div class="section-header">
                    <h3>üìÅ Album Batch Processing</h3>
                    <button id="refreshAlbums" class="refresh-btn">üîÑ</button>
                </div>
                
                <div class="albums-container">
                    <div class="albums-header">
                        <h4>Select Album to Process</h4>
                        <span class="album-count" id="albumCount">Loading...</span>
                    </div>
                    
                    <div class="albums-list" id="albumsList">
                        <div class="loading-albums">
                            <span class="loading"></span> Loading albums...
                        </div>
                    </div>
                </div>
                
                <div class="batch-controls">
                    <div class="batch-settings">
                        <label for="maxImages">Max Images:</label>
                        <input type="number" id="maxImages" value="50" min="1" max="200">
                        
                        <label for="batchName">Batch Name:</label>
                        <input type="text" id="batchName" placeholder="Optional batch name">
                    </div>
                    
                    <div class="control-buttons">
                        <button id="startBatch" class="start-btn" disabled>üöÄ Start Processing</button>
                        <button id="pauseBatch" class="pause-btn" disabled>‚è∏Ô∏è Pause</button>
                        <button id="resumeBatch" class="resume-btn" disabled>‚ñ∂Ô∏è Resume</button>
                        <button id="cancelBatch" class="cancel-btn" disabled>‚ùå Cancel</button>
                        <button id="retryFailed" class="retry-btn" disabled>üîÑ Retry Failed</button>
                    </div>
                </div>
                
                <div class="batch-progress" id="batchProgress" style="display: none;">
                    <div class="progress-header">
                        <h4>Processing Progress</h4>
                        <span class="batch-status" id="batchStatus">Idle</span>
                    </div>
                    
                    <div class="progress-bar-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="batchProgressFill"></div>
                        </div>
                        <span class="progress-percentage" id="progressPercentage">0%</span>
                    </div>
                    
                    <div class="progress-details">
                        <div class="progress-stats">
                            <span class="stat">
                                <strong>Processed:</strong> <span id="processedCount">0</span>
                            </span>
                            <span class="stat">
                                <strong>Total:</strong> <span id="totalCount">0</span>
                            </span>
                            <span class="stat">
                                <strong>Failed:</strong> <span id="failedCount">0</span>
                            </span>
                            <span class="stat">
                                <strong>Remaining:</strong> <span id="remainingCount">0</span>
                            </span>
                        </div>
                        
                        <div class="current-job" id="currentJob">
                            <strong>Current:</strong> <span id="currentJobName">Waiting...</span>
                        </div>
                    </div>
                </div>
                
                <div class="batch-results" id="batchResults" style="display: none;">
                    <div class="results-header">
                        <h4>Batch Results</h4>
                        <button id="clearResults" class="clear-btn">Clear</button>
                    </div>
                    
                    <div class="results-summary" id="resultsSummary"></div>
                    
                    <div class="failed-jobs" id="failedJobs" style="display: none;">
                        <h5>Failed Images</h5>
                        <div class="failed-list" id="failedList"></div>
                    </div>
                </div>
            </div>

            <div class="admin-tools-section">
                <div class="section-header">
                    <h3>‚ö†Ô∏è Admin Tools</h3>
                    <button id="toggleAdminTools" class="toggle-btn">Show</button>
                </div>
                
                <div class="admin-controls" id="adminControls" style="display: none;">
                    <div class="danger-zone">
                        <div class="danger-zone-header">
                            <h4>üóëÔ∏è Data Destruction (Testing Only)</h4>
                            <p class="warning-text">This will permanently delete all image data. Use only for testing purposes.</p>
                        </div>
                        
                        <div class="data-info">
                            <span class="data-count">Current records: <span id="recordCount">Loading...</span></span>
                        </div>
                        
                        <button id="destroyAllData" class="destroy-btn">Destroy All Image Data</button>
                        
                        <div class="destruction-status" id="destructionStatus" style="display: none;">
                            <div class="status-message" id="destructionMessage"></div>
                            <div class="backup-info" id="backupInfo" style="display: none;">
                                <small>Backup saved: <span id="backupFilename"></span></small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
